# 第5章 继承
## 5.1 类、超类和子类
### 5.1.1 定义子类
- **extends**
### 5.1.2 覆盖方法
- 重写 **override**
- 子类无法访问超类私有域
- 使用关键字 **super** 以调用超类方法
``` java
super.method(...)
```
- 子类无法删除超类任何域和方法
### 5.1.3 子类构造器
- 若子类构造器未显式调用超类构造器，则将自动调用超类默认的无参数构造器
- 关键字 **super**
	- 调用超类方法
	- 调用超类构造( 该语句只能在一个构造器的第一条语句出现 )
- 多态 **plymorphism** 
	-	一个对象变量可以指示多种实际类型的现象
- 动态绑定 **dynamic binding**
	- 在运行时可以自动地调用哪个方法的现象
- 如果不希望一个方法具有虚拟特征，可以将它标记为 **final**
### 5.1.4 继承层次
- **Java** 不支持多继承
### 5.1.5 多态
- “ **is a** ” 规则
- 里氏替换原则_
- 不能将超类的引用赋给子类变量
- 在**Java** 中，子类数组的引用可以转换成超类数组的引用。
> 让一个子类数组变量与一个超类数组变量引用同一个子类数组是合法的。此时如果试图通超类数组变量向数组存储一个超类引用，虽然能编译通过，但是运行时会引发 **ArrayStoreException** 异常
### 5.1.6 理解方法调用
- 返回类型不是签名的一部分
	- 覆盖方法时要保证返回类型的兼容性
	- 运行子类将覆盖方法的返回类型定义为原返回类型的子类型
- 静态绑定 **static binding**
	- **private** 方法
	- **static** 方法
	- **final** 方法
	- 构造器
- 动态绑定 **dynamic binding**
	- 方法表 **method table**
- 动态绑定的好处
	- 无需对现存代码修改编译
- 覆盖一个方法时，子类方法不能低于超类方法可见性
### 5.1.7 阻止继承：**final** 类和方法
- **final** 类不允许扩展
- 类中的特定方法可以被声明为 **final**
-  如果一个类被声明为 **final**
	- 类中的所有方法自动称为 **final** 方法
	- 但是不包括域
### 5.1.8 强制类型转换
- 只能在继承层次内进行类型转换
- 在将超类转换成子类之前，应该使用 **instanceof** 进行检查
``` java
x instanceof C // 若x为null，不会产生异常，只是返回false
```
### 5.1.9 抽象类
- 抽象类不能被实例化
### 5.1.10 受保护访问
- **protected**
	- 基类的 **protected** 成员是包内可见的，并且对子类可见；
	- 若子类与基类不在同一包中，那么在子类中，子类实例可以访问其从基类继承而来的 **protected** 方法，而不能访问基类实例的 **protected** 方法。
## 5.2 **Object**: 所有类的超类
- **Object** 类是**Java** 中所有类的始祖
- 在 **Java** 中只有基本类型( **primitive types** )不是对象
- 所有数组类型都扩展了 **Object** 类
### 5.2.1 **equals** 方法
- 为了防止两个比较对象都为 **null** 的情况，需要使用 **Objects.equals** 方法
- 在子类中定义 **equals** 方法时，首先调用超类的 **equals**
### 5.2.2 相等测试与继承
- **Java** 语言规范要求 **equals** 方法具有下面的特性：
	- 自反性
	- 对称性
	- 传递性
	- 一致性
	- 对于任意非空引用 **x**， ** x.equals(null)** 应该返回 **false**
- 如果子类能够拥有自己的相等概念，则对称性需求将强制采用 **getClass**进行检测
- 如果由超类决定相等的概念 ，那么就可以使用 **instanceof** 进行检测
- **equals** 方法例子
``` java
public boolean equals(Object otherObject) {
	if (this == otherObject) return true;
	if (otherObject == null) return false;
	if (getClass() != otherObject.getClass()) return false;
	if (!(otherObject instanceof ClassName)) return false
}
```
<!--stackedit_data:
eyJoaXN0b3J5IjpbNDYyNjEwNzc2LC01NzEzMjc1MzgsODA3OD
U5MjI5LDEzNzcxNTc3NTIsLTExMDkyNTgwMywtMjExNTc1MjQz
NywzMTEzMTk4NzksLTE0ODE4NTEwNywtNTQ0ODUwNTc4LC0xMD
M0MDMzNTExLDE5NDY0NDk1OTEsMTkzNzcxNjIwLDE1NjYxOTI1
MjgsLTY5NjI2NjA3NiwtMTgyMjExNDQ2MSwtNjY0MzQwMDAwLC
04OTQ3MzUyNTQsLTEyNTc0MzI3NzksLTQ5MDMzOTk3NSwtMzQx
NzU3Nzg2XX0=
-->